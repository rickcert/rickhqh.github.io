<html>

<head>
    <meta charset="UTF-8">
    <title>使用浏览器打开</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta name="format-detection" content="telephone=no">
    <meta content="false" name="twcClient" id="twcClient">
    <meta name="aplus-touch" content="1">
    <style>
        body,
        html {
            width: 100%;
            height: 100%
        }

        * {
            margin: 0;
            padding: 0
        }

        body {
            background-color: #fff
        }

        #browser img {
            width: 50px;
        }

        #browser {
            margin: 0px 10px;
            text-align: center;
        }

        #contens {
            font-weight: bold;
            color: #2466f4;
            margin: -285px 0px 10px;
            text-align: center;
            font-size: 20px;
            margin-bottom: 125px;
        }

        .top-bar-guidance {
            font-size: 15px;
            color: #fff;
            height: 70%;
            line-height: 1.8;
            padding-left: 20px;
            padding-top: 20px;
            background: url(./WxqqJump/banner.png) center top/contain no-repeat
        }

        .top-bar-guidance .icon-safari {
            width: 25px;
            height: 25px;
            vertical-align: middle;
            margin: 0 .2em
        }

        .app-download-tip {
            margin: 0 auto;
            width: 290px;
            text-align: center;
            font-size: 15px;
            color: #2466f4;
            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAcAQMAAACak0ePAAAABlBMVEUAAAAdYfh+GakkAAAAAXRSTlMAQObYZgAAAA5JREFUCNdjwA8acEkAAAy4AIE4hQq/AAAAAElFTkSuQmCC) left center/auto 15px repeat-x
        }

        .app-download-tip .guidance-desc {
            background-color: #fff;
            padding: 0 5px
        }

        .app-download-tip .icon-sgd {
            width: 25px;
            height: 25px;
            vertical-align: middle;
            margin: 0 .2em
        }

        .app-download-btn {
            display: block;
            width: 214px;
            height: 40px;
            line-height: 40px;
            margin: 18px auto 0 auto;
            text-align: center;
            font-size: 18px;
            color: #2466f4;
            border-radius: 20px;
            border: .5px #2466f4 solid;
            text-decoration: none
        }
    </style>
</head>

<body>

    <div class="top-bar-guidance">
        <p>点击右上角<img src="./WxqqJump/3dian.png" class="icon-safari">在 浏览器 打开</p>
        <p>苹果设备<img src="./WxqqJump/iphone.png" class="icon-safari">安卓设备<img src="./WxqqJump/android.png"
                class="icon-safari">↗↗↗</p>
    </div>

    <div id="contens">
        <p><br /><br /></p>
        <p>1.本站不支持微信/QQ访问</p>
        <p><br /></p>
        <p>2.请按照提示在 浏览器 打开</p>
    </div>

    <div class="app-download-tip">
        <span class="guidance-desc" id="url">rick.icu</span>
    </div>
    <p><br /></p>
    <div class="app-download-tip">

        <span class="guidance-desc">点击右上角浏览器打开<img src="./WxqqJump/3dian.png" class="icon-sgd"> or 复制网址自行打开</span>
    </div>
    <button id="copy-btn" data-clipboard-text=urlParmStr class="app-download-btn">点此复制本站网址</button>
    <script type="text/javascript">
        var url = document.location.toString();
        var urlParmStr = url.slice(url.indexOf('=') + 1);
        urlParmStr = decodeURIComponent(urlParmStr)
        console.log(urlParmStr);
        var ua = navigator.userAgent.toLowerCase();
        var isQQ = ua.indexOf('qq') != -1;
        var isWeixin = ua.indexOf('micromessenger') != -1;
        var isAndroid = ua.indexOf('android') != -1;
        var isIos = (ua.indexOf('iphone') != -1) || (ua.indexOf('ipad') != -1);
        document.getElementById("url").innerHTML = urlParmStr;
        // 判断是不是在微信客户端打开
        if (isWeixin || isQQ) {
            // 判断是在Android的微信客户端还是Ios的微信客户端
            if (isAndroid) {
                document.getElementById("url").innerHTML = urlParmStr;
            } else if (isIos) {
                window.location.href = 'safari://'+urlParmStr;
                document.getElementById("url").innerHTML = urlParmStr;
            } else {
                document.getElementById("url").innerHTML = urlParmStr;
            }
        } else {
            // 不是微信客户端，直接可以访问链接
            if (urlParmStr == url) {
                urlParmStr = "https://rick.icu";
            }
            console.log(urlParmStr);
            location.href=urlParmStr;
        }
        const copyBtn = document.getElementById("copy-btn");
        const textToCopy = window.location.href;

        copyBtn.addEventListener("click", () => {
            navigator.clipboard.writeText(textToCopy)
                .then(() => {
                    console.log(`已成功复制：${textToCopy}`);
                })
                .catch((error) => {
                    console.log(`复制失败：${error}`);
                });
        });
    </script>
    <script src="./WxqqJump/jquery-3.3.1.min.js"></script>
    <script src="./WxqqJump/clipboard.min.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.12.3/jquery.min.js"></script>
    <script src="./WxqqJump/layer/layer.js"></script>
    <script type="text/javascript">new ClipboardJS(".app-download-btn");</script>

    <body>

</html>
